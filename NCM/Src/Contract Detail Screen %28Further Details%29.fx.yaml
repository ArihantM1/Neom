"'Contract Detail Screen (Further Details)' As screen":
    OnVisible: |-
        =UpdateContext({lclSelectedClientData:LookUp(CM_Client_Contract,Contract_Id.Value=lclSelectedTaskHomeScreen.ID)});
        UpdateContext({lclSelectedVendorData:LookUp(CM_VENDOR,Contract_Id.Value=lclSelectedTaskHomeScreen.ID)});

    con_EditAndPreviewMain_CSD As groupContainer.manualLayoutContainer:
        DropShadow: =DropShadow.Bold
        Height: =Parent.Height*.83
        RadiusBottomLeft: =10
        RadiusBottomRight: =10
        RadiusTopLeft: =10
        RadiusTopRight: =10
        Width: =Parent.Width*.83
        X: =Parent.Width*.15
        Y: =HeaderComponent_WithoutNavbar_CDS.Y+HeaderComponent_WithoutNavbar_CDS.Height+Parent.Height*.035
        ZIndex: =1

        con_EditAndPreview_CSD As groupContainer.horizontalAutoLayoutContainer:
            DropShadow: =DropShadow.Bold
            Fill: =RGBA(255, 255, 255, 1)
            Height: =Parent.Height
            LayoutDirection: =LayoutDirection.Vertical
            LayoutMode: =LayoutMode.Auto
            Width: =Parent.Width
            ZIndex: =1

            con_Header_UserAgreeementPCF_CSD As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                DropShadow: =DropShadow.None
                FillPortions: =0
                Height: =Parent.Height*0.10
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                Width: =Parent.Width
                ZIndex: =1

                con_EditContractHeader_CSD As groupContainer.horizontalAutoLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    DropShadow: =DropShadow.None
                    Height: =Parent.Height
                    LayoutAlignItems: =LayoutAlignItems.Center
                    LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                    LayoutMinHeight: =Parent.Height
                    LayoutMinWidth: =250
                    LayoutMode: =LayoutMode.Auto
                    PaddingLeft: =5
                    PaddingRight: =5
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Width: =Parent.Width
                    ZIndex: =1

                    lbl_Edit_CSD As label:
                        FontWeight: =FontWeight.Bold
                        Height: =Parent.Height
                        Size: =18
                        Text: ="EDIT "
                        Width: =Parent.Width*.3
                        ZIndex: =1

                    con_HeaderButtons_CSD As groupContainer.horizontalAutoLayoutContainer:
                        AlignInContainer: =AlignInContainer.SetByContainer
                        DropShadow: =DropShadow.None
                        FillPortions: =0
                        Height: =Parent.Height
                        LayoutAlignItems: =LayoutAlignItems.Center
                        LayoutGap: =5
                        LayoutJustifyContent: =LayoutJustifyContent.End
                        LayoutMinHeight: =100
                        LayoutMinWidth: =250
                        LayoutMode: =LayoutMode.Auto
                        PaddingRight: =5
                        Width: =Parent.Width*.68
                        ZIndex: =2

                        con_CommentButton_CSD As groupContainer.manualLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            BorderColor: =RGBA(107, 29, 94, 1)
                            BorderThickness: =2
                            FillPortions: =0
                            Height: =Parent.Height*.3
                            LayoutMinHeight: =100
                            LayoutMinWidth: =250
                            Width: =Parent.Height*.3
                            ZIndex: =1

                        con_FilterButton_CSD As groupContainer.manualLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            BorderColor: =RGBA(107, 29, 94, 1)
                            BorderThickness: =2
                            FillPortions: =0
                            Height: =Parent.Height*.3
                            LayoutMinHeight: =100
                            LayoutMinWidth: =250
                            Width: =Parent.Height*.3
                            ZIndex: =2

                        con_ListViewButton_CSD As groupContainer.manualLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            BorderColor: =RGBA(107, 29, 94, 1)
                            BorderThickness: =2
                            FillPortions: =0
                            Height: =Parent.Height*.3
                            LayoutMinHeight: =100
                            LayoutMinWidth: =250
                            Width: =Parent.Height*.3
                            ZIndex: =3

                con_PreviewContractHeader_CSD As groupContainer.horizontalAutoLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    DropShadow: =DropShadow.None
                    FillPortions: =3
                    Height: =Parent.Height
                    LayoutMinHeight: =Parent.Height
                    LayoutMinWidth: =250
                    LayoutMode: =LayoutMode.Auto
                    PaddingLeft: =5
                    PaddingRight: =5
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Width: =Parent.Width
                    Y: =20
                    ZIndex: =2

                    lbl_Preview_CSD As label:
                        FontWeight: =FontWeight.Bold
                        Height: =Parent.Height
                        LayoutMinHeight: =Parent.Height
                        Size: =18
                        Text: ="PREVIEW CONTRACT"
                        Width: =Parent.Width
                        ZIndex: =1

            con_MainPFCUserAgreement_CSD As groupContainer.manualLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                FillPortions: =0
                Height: =Parent.Height*.75
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                Width: =Parent.Width
                ZIndex: =2

                pcf_UserAgreement_CSD As chartJSV19:
                    bankAccountNo: =lclSelectedClientData.Client_Bank_Account_No
                    bankBranchAddress: =lclSelectedClientData.Client_Bank_Branch_Address
                    bankIFSCNEFTCode: =lclSelectedClientData.'Client_Bank IFSC Code'
                    bankMICRCode: =lclSelectedClientData.Client_Bank_MIRC_No
                    bankName: =lclSelectedClientData.Client_Bank_Name
                    charges: =Text(lclSelectedTaskHomeScreen.Contract_Charges)
                    companyBillingAddress: =lclSelectedClientData.Client_Billing_Country
                    companyBillingCity: =lclSelectedClientData.Client_Billing_City
                    companyBillingCountry: =lclSelectedClientData.Client_Billing_Country
                    companyBillingState: =lclSelectedClientData.Client_Billing_State
                    companyName: =LookUp(CM_ClientData,ID = lclSelectedTaskHomeScreen.Client_ID).Client_name
                    contactCreationCity: =lclSelectedTaskHomeScreen.Contract_Created_Location
                    contactEmail: =lclSelectedClientData.Client_Contact_Person_Email
                    contactPersonName: =lclSelectedClientData.Client_Contact_Person_name
                    contactPhoneNo: =lclSelectedClientData.Client_Contact_Person_PhoneNo
                    contractCreationFullDate: =Text(lclSelectedTaskHomeScreen.Contract_CreatedOn,"yyyy-mm-dd")
                    DisplayMode: =DisplayMode.Edit
                    DivH: =Self.Height-35
                    Height: =Parent.Height
                    invoiceAddress: =lclSelectedClientData.Client_Invoice_Country
                    invoiceCity: =lclSelectedClientData.Client_Invoice_State
                    invoiceName: =lclSelectedClientData.Client_Invoice_Name
                    invoicePin: =lclSelectedClientData.Client_Invoice_PinNo
                    invoiceState: =lclSelectedClientData.Client_Invoice_State
                    panNo: =lclSelectedClientData.PIN_CODE
                    phoneNo: =lclSelectedClientData.Client_Contact_Person_PhoneNo
                    pinCode: =lclSelectedClientData.PIN_CODE
                    serviceTaxNo: =LookUp(CM_ClientData, ID = lclSelectedTaskHomeScreen.Client_ID).Service_Tax_No
                    toCustomerCustomerAddress: =lclSelectedClientData.Notice_Client_Address
                    toCustomerCustomerAttn: =lclSelectedClientData.Notice_Client_Attention
                    UserRole: =UserRole
                    vendorAddress: =lclSelectedVendorData.Vendor_Address
                    vendorContactNo: =lclSelectedVendorData.Vendor_Contact_Number
                    vendorEmail: =lclSelectedVendorData.Vendor_Email
                    vendorName: =lclSelectedVendorData.Vendor_Email
                    Width: =Parent.Width
                    witnessVendorBy: =lclSelectedClientData.Witness_Vendor_By
                    witnessVendorDate: =Text(lclSelectedClientData.'Witness Vendor Date',"yyyy-mm-dd")
                    witnessVendorTitle: =lclSelectedClientData.Witness_Vendor_Title
                    X: =0
                    Y: =0
                    ZIndex: =1

            con_EditAndPreviewButtonPart_CSD As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                DropShadow: =DropShadow.None
                FillPortions: =0
                Height: =Parent.Height*.15
                LayoutAlignItems: =LayoutAlignItems.Center
                LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                PaddingLeft: =80
                PaddingRight: =80
                PaddingTop: =10
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Width: =Parent.Width
                ZIndex: =3

                btn_Back_CSD As button:
                    BorderColor: =RGBA(219, 200, 216, 1)
                    Color: =RGBA(107, 29, 94, 1)
                    Fill: =RGBA(255, 255, 255, 1)
                    Height: =35
                    HoverColor: =RGBA(107, 29, 94, 1)
                    HoverFill: =RGBA(219, 200, 216, 1)
                    OnSelect: |-
                        =UpdateContext({lclSelectedTaskHomeScreen:Blank()});
                        Back()
                    Size: =10
                    Text: ="Back"
                    Width: =Parent.Width*.07
                    ZIndex: =1

                btn_CreateContract_CSD As button:
                    BorderColor: =RGBA(107, 29, 94, 1)
                    Color: =RGBA(107, 29, 94, 1)
                    DisplayMode: |-
                        =Switch(
                            gblActiveUser,
                            "Procurement",
                            If(
                            !IsBlank(pcf_UserAgreement_CSD.contactCreationCity)
                            And !IsBlank(pcf_UserAgreement_CSD.charges),
                            DisplayMode.Edit,
                            DisplayMode.Disabled
                            ),
                            "Proponent",
                            If(
                            !IsBlank(pcf_UserAgreement_CSD.witnessVendorBy)
                            And !IsBlank(pcf_UserAgreement_CSD.vendorAddress)
                            And !IsBlank(pcf_UserAgreement_CSD.witnessVendorDate)
                            And !IsBlank(pcf_UserAgreement_CSD.witnessVendorTitle)
                            And !IsBlank(pcf_UserAgreement_CSD.vendorName)
                            And !IsBlank(pcf_UserAgreement_CSD.vendorContactNo)
                            And !IsBlank(pcf_UserAgreement_CSD.vendorEmail),
                            DisplayMode.Edit,
                            DisplayMode.Disabled
                            ),
                            "Supplier",
                            If(
                            !IsBlank(pcf_UserAgreement_CSD.toCustomerCustomerAddress)
                            And !IsBlank(pcf_UserAgreement_CSD.toCustomerCustomerAttn)
                            And !IsBlank(pcf_UserAgreement_CSD.bankBranchAddress)
                            And !IsBlank(pcf_UserAgreement_CSD.bankIFSCNEFTCode)
                            And !IsBlank(pcf_UserAgreement_CSD.bankMICRCode)
                            And !IsBlank(pcf_UserAgreement_CSD.bankAccountNo)
                            And !IsBlank(pcf_UserAgreement_CSD.invoicePin)
                            And !IsBlank(pcf_UserAgreement_CSD.bankName)
                            And !IsBlank(pcf_UserAgreement_CSD.invoiceState)
                            And !IsBlank(pcf_UserAgreement_CSD.invoiceCity)
                            And !IsBlank(pcf_UserAgreement_CSD.invoiceName)
                            And !IsBlank(pcf_UserAgreement_CSD.contactEmail)
                            And !IsBlank(pcf_UserAgreement_CSD.contactPersonName)
                            And !IsBlank(pcf_UserAgreement_CSD.contactPersonName)
                            And !IsBlank(pcf_UserAgreement_CSD.pinCode)
                            And !IsBlank(pcf_UserAgreement_CSD.companyBillingCity)
                            And !IsBlank(pcf_UserAgreement_CSD.companyBillingState)
                            And !IsBlank(pcf_UserAgreement_CSD.companyBillingCountry),
                            DisplayMode.Edit,
                            DisplayMode.Disabled
                            )
                        
                        )
                    Fill: =RGBA(255, 255, 255, 1)
                    Height: =35
                    HoverFill: =RGBA(107, 29, 94, 1)
                    OnSelect: |+
                        =//If(IsBlank(VarContractDetailsPatch),Set(VarContractDetailsPatch,lclSelectedTaskHomeScreen),{});
                        Navigate('Contract Summary Screen');
                        Refresh(CM_Client_Contract);
                        Refresh(CM_ContractDetails);
                        Refresh(CM_Task);
                        Switch(
                            gblActiveUser,
                            "Admin",
                            Switch(
                                 VarContractDetailsPatch.Coc_stage,
                                 1,
                                   Set(
                                gblTaskPatchDetail,
                                Patch(
                                    CM_Task,
                                    Defaults(CM_Task),
                                    {Contract_Id:VarContractDetailsPatch.ID},
                                    {
                                        Contract_Id: VarContractDetailsPatch.ID,
                                        Task_Name: "Fill Out Key Data Of Supplier",
                                        Task_Status: "Pending",
                                        Task_Assigned_to: "Supplier"
                                    }
                                );
                               
                                
                            );
                            Patch(
                                CM_Client_Contract,
                                Defaults(CM_Client_Contract),
                                {
                                    Client_Id: {
                                        Id: VarContractDetailsPatch.Client_ID,
                                        Value: VarContractDetailsPatch.Client_ID
                                    },
                                    Contract_Id: {
                                        Id: VarContractDetailsPatch.ID,
                                        Value: VarContractDetailsPatch.ID
                                    },
                                    contract_ID_FK: firstFormID
                             
                                }
                            );
                            Patch(
                                CM_ContractDetails,
                                {ID: VarContractDetailsPatch.ID},
                                {
                                    Contract_CreatedOn: DateTimeValue(pcf_UserAgreement_CSD.contractCreationFullDate),
                                    Contract_Created_Location: pcf_UserAgreement_CSD.contactCreationCity,
                                    Status: {Value: "Active"},
                                    Coc_stage: 2,
                                    Contract_Charges: Value(pcf_UserAgreement_CSD.charges),
                                    Task_ID_Fk: {
                                        Id: gblTaskPatchDetail.ID,
                                        Value: gblTaskPatchDetail.Task_Name
                                    }
                                }
                            );
                            Patch(
                                CM_VENDOR,Defaults(CM_VENDOR),
                                {
                                Contract_Id:{Id:VarContractDetailsPatch.ID,Value:VarContractDetailsPatch.ID},
                                contract_ID_FK:firstFormID 
                               
                                }
                            ),
                        
                            2,
                            Set(
                                gblTaskPatchDetail,
                                Patch(
                                    CM_Task,
                                    LookUp(
                                        CM_Task,
                                        Contract_Id = lclSelectedTaskHomeScreen.ID
                                    ),
                                    {
                                        Task_Assigned_to: "Proponent",
                                        Task_Name: "Fill Out Key Data of Proponent"
                                    }
                                )
                            );
                            Refresh(CM_Task);
                            UpdateIf(
                                CM_ContractDetails,
                                ID = lclSelectedTaskHomeScreen.ID,
                                {
                                    Coc_stage: 3,
                                    Task_ID_Fk: {
                                        Id: gblTaskPatchDetail.ID,
                                        Value: gblTaskPatchDetail.Task_Name
                                    }
                                }
                            );
                            Patch(
                                CM_Client_Contract,
                                {
                                    ID: LookUp(
                                        CM_Client_Contract,
                                        contract_ID_FK = lclSelectedTaskHomeScreen.ID
                                    ).ID
                                },
                                {
                                    Client_Id: {
                                        Id: VarContractDetailsPatch.Client_ID,
                                        Value: VarContractDetailsPatch.Client_ID
                                    },
                                    Contract_Id: {
                                        Id: VarContractDetailsPatch.ID,
                                        Value: VarContractDetailsPatch.ID
                                    },
                                    Notice_Client_Attention: pcf_UserAgreement_CSD.toCustomerCustomerAttn,
                                    Notice_Client_Address: pcf_UserAgreement_CSD.toCustomerCustomerAddress,
                                    Client_Contact_Person_name: pcf_UserAgreement_CSD.contactPersonName,
                                    Client_Contact_Person_PhoneNo: Value(pcf_UserAgreement_CSD.contactPhoneNo),
                                    Client_Contact_Person_Email: pcf_UserAgreement_CSD.contactEmail,
                                    Client_Billing_City: pcf_UserAgreement_CSD.companyBillingCity,
                                    Client_Billing_State: pcf_UserAgreement_CSD.companyBillingState,
                                    Client_Billing_Country: pcf_UserAgreement_CSD.companyBillingCountry,
                                    PIN_CODE: Value(pcf_UserAgreement_CSD.pinCode),
                                    Client_Invoice_Name: pcf_UserAgreement_CSD.invoiceName,
                                    Client_Invoice_City: pcf_UserAgreement_CSD.invoiceCity,
                                    Client_Invoice_State: pcf_UserAgreement_CSD.invoiceState,
                                    //Client_Invoice_Country:chartJS1.invoi,
                                    Client_Invoice_PinNo: Value(pcf_UserAgreement_CSD.invoicePin),
                                    Client_Bank_Name: pcf_UserAgreement_CSD.bankName,
                                    Client_Bank_MIRC_No: pcf_UserAgreement_CSD.bankMICRCode,
                                    'Client_Bank IFSC Code': pcf_UserAgreement_CSD.bankIFSCNEFTCode,
                                    Client_Bank_Account_No: pcf_UserAgreement_CSD.bankAccountNo,
                                    Client_Bank_Branch_Address: pcf_UserAgreement_CSD.bankBranchAddress
                                }
                            ),
                            3,
                              Set(
                                gblTaskPatchDetail,
                                Patch(
                                    CM_Task,
                                    {
                                        ID: LookUp(
                                            CM_Task,
                                            Contract_Id = lclSelectedTaskHomeScreen.ID
                                        ).ID
                                    },
                                    {
                                        Task_Assigned_to: "Procurement",
                                        Task_Name: "Legal Review"
                                    }
                                )
                            );
                            Refresh(CM_Task);
                            Patch(
                                CM_ContractDetails,
                                {ID: lclSelectedTaskHomeScreen.ID},
                                {
                                    Coc_stage: 4,
                                    Task_ID_Fk: {
                                        Id: gblTaskPatchDetail.ID,
                                        Value: gblTaskPatchDetail.Task_Name
                                    }
                                }
                            );
                            Patch(
                                CM_Client_Contract,
                                {
                                    ID: LookUp(
                                        CM_Client_Contract,
                                        contract_ID_FK = lclSelectedTaskHomeScreen.ID
                                    ).ID
                                },
                                {
                                    Client_Id: {
                                        Id: VarContractDetailsPatch.Client_ID,
                                        Value: VarContractDetailsPatch.Client_ID
                                    },
                                    Contract_Id: {
                                        Id: VarContractDetailsPatch.ID,
                                        Value: VarContractDetailsPatch.ID
                                    },
                                   
                                    Witness_Vendor_By: pcf_UserAgreement_CSD.witnessVendorBy,
                                    Witness_Vendor_Title: pcf_UserAgreement_CSD.witnessVendorTitle,
                                    'Witness Vendor Date': DateTimeValue(pcf_UserAgreement_CSD.witnessVendorDate)
                                }
                            );
                            Patch(
                                CM_VENDOR,
                                {
                                    ID: LookUp(
                                        CM_VENDOR,
                                        contract_ID_FK = lclSelectedTaskHomeScreen.ID
                                    ).ID
                                },
                                {
                                    Vendor_Address: pcf_UserAgreement_CSD.vendorAddress,
                                    Vendor_Contact_Number: Value(pcf_UserAgreement_CSD.vendorContactNo),
                                    Title: pcf_UserAgreement_CSD.vendorName,
                                    Vendor_Email: pcf_UserAgreement_CSD.vendorEmail
                                }
                            )
                        
                        
                            
                            
                            
                            
                            
                            ),
                            "Supplier",
                            Set(
                                gblTaskPatchDetail,
                                Patch(
                                    CM_Task,
                                    LookUp(
                                        CM_Task,
                                        Contract_Id = lclSelectedTaskHomeScreen.ID
                                    ),
                                    {
                                        Task_Assigned_to: "Proponent",
                                        Task_Name: "Fill Out Key Data of Proponent"
                                    }
                                )
                            );
                            Refresh(CM_Task);
                            UpdateIf(
                                CM_ContractDetails,
                                ID = lclSelectedTaskHomeScreen.ID,
                                {
                                    Coc_stage: 3,
                                    Task_ID_Fk: {
                                        Id: gblTaskPatchDetail.ID,
                                        Value: gblTaskPatchDetail.Task_Name
                                    }
                                }
                            );
                            Patch(
                                CM_Client_Contract,
                                {
                                    ID: LookUp(
                                        CM_Client_Contract,
                                        contract_ID_FK = lclSelectedTaskHomeScreen.ID
                                    ).ID
                                },
                                {
                                    Client_Id: {
                                        Id: VarContractDetailsPatch.Client_ID,
                                        Value: VarContractDetailsPatch.Client_ID
                                    },
                                    Contract_Id: {
                                        Id: VarContractDetailsPatch.ID,
                                        Value: VarContractDetailsPatch.ID
                                    },
                                    
                                    Notice_Client_Attention: pcf_UserAgreement_CSD.toCustomerCustomerAttn,
                                    Notice_Client_Address: pcf_UserAgreement_CSD.toCustomerCustomerAddress,
                                    Client_Contact_Person_name: pcf_UserAgreement_CSD.contactPersonName,
                                    Client_Contact_Person_PhoneNo: Value(pcf_UserAgreement_CSD.contactPhoneNo),
                                    Client_Contact_Person_Email: pcf_UserAgreement_CSD.contactEmail,
                                    Client_Billing_City: pcf_UserAgreement_CSD.companyBillingCity,
                                    Client_Billing_State: pcf_UserAgreement_CSD.companyBillingState,
                                    Client_Billing_Country: pcf_UserAgreement_CSD.companyBillingCountry,
                                    PIN_CODE: Value(pcf_UserAgreement_CSD.pinCode),
                                    Client_Invoice_Name: pcf_UserAgreement_CSD.invoiceName,
                                    Client_Invoice_City: pcf_UserAgreement_CSD.invoiceCity,
                                    Client_Invoice_State: pcf_UserAgreement_CSD.invoiceState,
                                    Client_Invoice_PinNo: Value(pcf_UserAgreement_CSD.invoicePin),
                                    Client_Bank_Name: pcf_UserAgreement_CSD.bankName,
                                    Client_Bank_MIRC_No: pcf_UserAgreement_CSD.bankMICRCode,
                                    'Client_Bank IFSC Code': pcf_UserAgreement_CSD.bankIFSCNEFTCode,
                                    Client_Bank_Account_No: pcf_UserAgreement_CSD.bankAccountNo,
                                    Client_Bank_Branch_Address: pcf_UserAgreement_CSD.bankBranchAddress
                                }
                            ),
                            "Proponent",
                            Set(
                                gblTaskPatchDetail,
                                Patch(
                                    CM_Task,
                                    {
                                        ID: LookUp(
                                            CM_Task,
                                            Contract_Id = lclSelectedTaskHomeScreen.ID
                                        ).ID
                                    },
                                    {
                                        Task_Assigned_to: "Procurement",
                                        Task_Name: "Legal Review"
                                    }
                                )
                            );
                            Refresh(CM_Task);
                            Patch(
                                CM_ContractDetails,
                                {ID: lclSelectedTaskHomeScreen.ID},
                                {
                                    Coc_stage: 4,
                                    Task_ID_Fk: {
                                        Id: gblTaskPatchDetail.ID,
                                        Value: gblTaskPatchDetail.Task_Name
                                    }
                                }
                            );
                            Patch(
                                CM_Client_Contract,
                                {
                                    ID: LookUp(
                                        CM_Client_Contract,
                                        contract_ID_FK = lclSelectedTaskHomeScreen.ID
                                    ).ID
                                },
                                {
                                    Client_Id: {
                                        Id: VarContractDetailsPatch.Client_ID,
                                        Value: VarContractDetailsPatch.Client_ID
                                    },
                                    Contract_Id: {
                                        Id: VarContractDetailsPatch.ID,
                                        Value: VarContractDetailsPatch.ID
                                    },
                                   
                                    Witness_Vendor_By: pcf_UserAgreement_CSD.witnessVendorBy,
                                    Witness_Vendor_Title: pcf_UserAgreement_CSD.witnessVendorTitle,
                                    'Witness Vendor Date': DateTimeValue(pcf_UserAgreement_CSD.witnessVendorDate)
                                }
                            );
                            Patch(
                                CM_VENDOR,
                                {
                                    ID: LookUp(
                                        CM_VENDOR,
                                        contract_ID_FK = lclSelectedTaskHomeScreen.ID
                                    ).ID
                                },
                                {
                                    Vendor_Address: pcf_UserAgreement_CSD.vendorAddress,
                                    Vendor_Contact_Number: Value(pcf_UserAgreement_CSD.vendorContactNo),
                                    Title: pcf_UserAgreement_CSD.vendorName,
                                    Vendor_Email: pcf_UserAgreement_CSD.vendorEmail
                                }
                            ),
                            "Procurement",
                            Set(
                                gblTaskPatchDetail,
                                Patch(
                                    CM_Task,
                                    {
                                        Contract_Id: VarContractDetailsPatch.ID,
                                        Task_Name: "Fill Out Key Data Of Supplier",
                                        Task_Status: "Pending",
                                        Task_Assigned_to: "Supplier"
                                    }
                                )
                            );
                            Patch(
                                CM_Client_Contract,
                                Defaults(CM_Client_Contract),
                                {
                                    Client_Id: {
                                        Id: VarContractDetailsPatch.Client_ID,
                                        Value: VarContractDetailsPatch.Client_ID
                                    },
                                    Contract_Id: {
                                        Id: VarContractDetailsPatch.ID,
                                        Value: VarContractDetailsPatch.ID
                                    },
                                    contract_ID_FK: firstFormID
                                
                                }
                            );
                            Patch(
                                CM_ContractDetails,
                                {ID: VarContractDetailsPatch.ID},
                                {
                                    Contract_CreatedOn: DateTimeValue(pcf_UserAgreement_CSD.contractCreationFullDate),
                                    Contract_Created_Location: pcf_UserAgreement_CSD.contactCreationCity,
                                    Status: {Value: "Active"},
                                    Coc_stage: 2,
                                    Contract_Charges: Value(pcf_UserAgreement_CSD.charges),
                                    Task_ID_Fk: {
                                        Id: gblTaskPatchDetail.ID,
                                        Value: gblTaskPatchDetail.Task_Name
                                    }
                                }
                            );
                            Patch(
                                CM_VENDOR,Defaults(CM_VENDOR),
                                {
                                Contract_Id:{Id:VarContractDetailsPatch.ID,Value:VarContractDetailsPatch.ID},
                               contract_ID_FK:firstFormID 
                              
                                }
                            )
                        );
                        
                        Refresh(CM_Client_Contract);
                        Refresh(CM_ContractDetails);
                        Refresh(CM_VENDOR);
                        Refresh(CM_Task);
                        If(
                            IsBlank(VarContractDetailsPatch.ID),
                            Set(gblReturnvaluePDFFlow,CM_PDFSummaryFlow.Run(lclSelectedTaskHomeScreen.ID)),
                            Set(gblReturnvaluePDFFlow,CM_PDFSummaryFlow.Run(VarContractDetailsPatch.ID))
                        );
                        
                        If(IsBlank(gblReturnvaluePDFFlow),{},Refresh(CM_ContractDetails));
                        Reset(drp_ServiceType_CCS);
                        Reset(drp_Client_CCS);
                        Reset(drp_Services_CCS);
                        Reset(drp_ApplicableTo_CCS);
                        Reset(drp_Currency_CCS);
                        Reset(drp_Country_CCS);
                        Reset('drp_SelectNew&Existing_CCS');
                        Reset(lblContractName_CCS);
                        Reset(txt_DescriptionInput_CCS);
                        Reset(dte_StartDate_CCS);
                        Reset(dte_EndDate_CCS);
                        UpdateContext({lclSelectedTaskHomeScreen:Blank()});
                        Set(VarContractDetailsPatch,Blank());
                        Reset(rdo_CreateDucplicateCOCSelect_CCS);
                        Set(
                            VarContractDetailsPatch,
                            Blank()
                        );
                        Set(
                            firstFormID,
                            Blank()
                        );
                        Set(HTMLContent,pcf_UserAgreement_CSD.HTMLContent);
                        Set(HTMLContent,Substitute(HTMLContent,"orange","white"));
                        Set(HTMLContent,Substitute(HTMLContent,"yellow","white"));
                        HTML2PDF_PCFFLOW.Run(HTMLContent,lclSelectedTaskHomeScreen.Contract_name&"_"&Now(),Value(lclSelectedTaskHomeScreen.ID));
                        
                    Size: =10
                    Text: ="Submit"
                    Width: =Parent.Width*.07
                    ZIndex: =2

    shp_RectDocuments_CSD As rectangle:
        BorderStyle: =BorderStyle.None
        DisplayMode: =DisplayMode.View
        Fill: =RGBA(107, 29, 94, 1)
        Height: =3
        Width: =con_EditAndPreviewMain_CSD.X-shp_CircleDocuments_CSD.Width-shp_CircleDocuments_CSD.X-Parent.Width*0.01
        X: =122
        Y: =shp_CircleDocuments_CSD.Y+(shp_CircleDocuments_CSD.Height-Self.Height)/2
        ZIndex: =10

    HeaderComponent_WithoutNavbar_CDS As HeaderCMP_withoutNavbar:
        Height: =Parent.Height*.1
        Width: =Parent.Width
        ZIndex: =11

    grp_Milestone_CSD As group:
        Height: =5
        Width: =5
        X: =6.109999999999999
        Y: =124.38000000000002
        ZIndex: =11

        shp_CircleDocuments_CSD As circle:
            Fill: =RGBA(107, 29, 94, 1)
            Height: =70
            Width: =70
            X: =46
            Y: =506
            ZIndex: =2

        shp_CircleOverview_CSD As circle:
            BorderStyle: =BorderStyle.None
            Fill: =RGBA(107, 29, 94, 1)
            Height: =70
            Width: =70
            X: =46
            Y: =126
            ZIndex: =3

        ico_Overview_CSD As icon.Flag:
            Color: =RGBA(255, 255, 255, 1)
            DisplayMode: =DisplayMode.View
            Height: =36
            Icon: =Icon.Flag
            Width: =35
            X: =63
            Y: =143
            ZIndex: =4

        shp_RectOverview_CSD As rectangle:
            BorderStyle: =BorderStyle.None
            DisplayMode: =DisplayMode.View
            Fill: =RGBA(107, 29, 94, 1)
            Height: =3
            Width: =con_EditAndPreviewMain_CSD.X-shp_CircleDocuments_CSD.Width-shp_CircleDocuments_CSD.X-Parent.Width*0.01
            X: =122
            Y: =159
            ZIndex: =5

        ico_Document_CSD As icon.Flag:
            Color: =RGBA(255, 255, 255, 1)
            DisplayMode: =DisplayMode.View
            Height: =36
            Icon: =Icon.Flag
            Width: =35
            X: =63
            Y: =524
            ZIndex: =6

        shp_RectMileStone_CSD As rectangle:
            Fill: =RGBA(107, 29, 94, 1)
            Height: =261
            Width: =3
            X: =79
            Y: =237
            ZIndex: =7

        lbl_Overview_CSD As label:
            Align: =Align.Center
            FontWeight: =FontWeight.Bold
            Height: =41
            Text: ="Overview"
            Width: =149
            X: =7
            Y: =196
            ZIndex: =8

        lbl_Document_CSD As label:
            Align: =Align.Center
            FontWeight: =FontWeight.Bold
            Height: =41
            Text: ="Documents"
            Width: =149
            X: =7
            Y: =571
            ZIndex: =9

