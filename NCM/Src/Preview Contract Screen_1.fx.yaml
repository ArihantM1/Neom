"'Preview Contract Screen_1' As screen":

    con_EditAndPreviewMain_PCS_2 As groupContainer.manualLayoutContainer:
        DropShadow: =DropShadow.Bold
        Height: =Parent.Height*.83
        RadiusBottomLeft: =10
        RadiusBottomRight: =10
        RadiusTopLeft: =10
        RadiusTopRight: =10
        Width: =Parent.Width*.83
        X: =Parent.Width*.15
        Y: =HeaderComponent_WithoutNavbar_PCS_2.Y+HeaderComponent_WithoutNavbar_PCS_2.Height+Parent.Height*.035
        ZIndex: =1

        con_EditAndPreview_PCS_2 As groupContainer.horizontalAutoLayoutContainer:
            DropShadow: =DropShadow.Bold
            Fill: =RGBA(255, 255, 255, 1)
            Height: =Parent.Height
            LayoutDirection: =LayoutDirection.Vertical
            LayoutMode: =LayoutMode.Auto
            Width: =Parent.Width
            ZIndex: =1

            Container4 As groupContainer.horizontalAutoLayoutContainer:
                DropShadow: =DropShadow.None
                FillPortions: =0
                Height: =Parent.Height*0.10
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                ZIndex: =1

                con_EditContractHeader_PCS_2 As groupContainer.horizontalAutoLayoutContainer:
                    DropShadow: =DropShadow.None
                    Height: =Parent.Height*.1
                    LayoutAlignItems: =LayoutAlignItems.Center
                    LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                    LayoutMinHeight: =Parent.Height
                    LayoutMinWidth: =250
                    LayoutMode: =LayoutMode.Auto
                    PaddingLeft: =5
                    PaddingRight: =5
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Width: =Parent.Width
                    ZIndex: =1

                    lbl_Edit_PCS_2 As label:
                        FontWeight: =FontWeight.Bold
                        Height: =Parent.Height
                        Size: =18
                        Text: ="EDIT "
                        Width: =Parent.Width*.3
                        ZIndex: =1

                    con_HeaderButtons_PCS_2 As groupContainer.horizontalAutoLayoutContainer:
                        AlignInContainer: =AlignInContainer.SetByContainer
                        DropShadow: =DropShadow.None
                        FillPortions: =0
                        Height: =Parent.Height
                        LayoutAlignItems: =LayoutAlignItems.Center
                        LayoutGap: =5
                        LayoutJustifyContent: =LayoutJustifyContent.End
                        LayoutMinHeight: =100
                        LayoutMinWidth: =250
                        LayoutMode: =LayoutMode.Auto
                        PaddingRight: =5
                        Width: =Parent.Width*.68
                        ZIndex: =2

                        con_CommentButton_PCS_2 As groupContainer.manualLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            BorderColor: =RGBA(107, 29, 94, 1)
                            BorderThickness: =2
                            FillPortions: =0
                            Height: =Parent.Height*.3
                            LayoutMinHeight: =100
                            LayoutMinWidth: =250
                            Width: =Parent.Height*.3
                            ZIndex: =1

                        con_FilterButton_PCS_2 As groupContainer.manualLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            BorderColor: =RGBA(107, 29, 94, 1)
                            BorderThickness: =2
                            FillPortions: =0
                            Height: =Parent.Height*.3
                            LayoutMinHeight: =100
                            LayoutMinWidth: =250
                            Width: =Parent.Height*.3
                            ZIndex: =2

                        con_ListViewButton_PCS_2 As groupContainer.manualLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            BorderColor: =RGBA(107, 29, 94, 1)
                            BorderThickness: =2
                            FillPortions: =0
                            Height: =Parent.Height*.3
                            LayoutMinHeight: =100
                            LayoutMinWidth: =250
                            Width: =Parent.Height*.3
                            ZIndex: =3

                con_PreviewContractHeader_PCS_2 As groupContainer.horizontalAutoLayoutContainer:
                    DropShadow: =DropShadow.None
                    FillPortions: =3
                    Height: =Parent.Height*.1
                    LayoutMinHeight: =Parent.Height
                    LayoutMinWidth: =250
                    LayoutMode: =LayoutMode.Auto
                    PaddingLeft: =5
                    PaddingRight: =5
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Width: =Parent.Width
                    Y: =20
                    ZIndex: =2

                    lbl_Preview_PCS_2 As label:
                        AlignInContainer: =AlignInContainer.Center
                        FontWeight: =FontWeight.Bold
                        Height: =Parent.Height
                        LayoutMinHeight: =Parent.Height
                        Size: =18
                        Text: ="PREVIEW CONTRACT"
                        Width: =Parent.Width
                        ZIndex: =1

            Container5 As groupContainer.manualLayoutContainer:
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                ZIndex: =2

                chartJS2 As chartJSV14:
                    DisplayMode: =DisplayMode.Edit
                    DivH: =Self.Height
                    Height: =Parent.Height
                    UserRole: =UserRole
                    Width: =Parent.Width
                    X: =0
                    Y: =0
                    ZIndex: =1

            con_EditAndPreviewButtonPart_PCS_2 As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                DropShadow: =DropShadow.None
                FillPortions: =0
                Height: =Parent.Height*.15
                LayoutAlignItems: =LayoutAlignItems.Center
                LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                PaddingLeft: =80
                PaddingRight: =80
                PaddingTop: =10
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Width: =Parent.Width
                ZIndex: =3

                btn_Back_PCS_2 As button:
                    BorderColor: =RGBA(219, 200, 216, 1)
                    Color: =RGBA(107, 29, 94, 1)
                    Fill: =RGBA(255, 255, 255, 1)
                    Height: =35
                    HoverColor: =RGBA(107, 29, 94, 1)
                    HoverFill: =RGBA(219, 200, 216, 1)
                    OnSelect: |+
                        =
                        Navigate('Create Contract Screen')
                        
                        
                        
                        
                        
                    Size: =10
                    Text: ="Back"
                    Width: =Parent.Width*.07
                    ZIndex: =1

                btn_CreateContract_PCS_2 As button:
                    BorderColor: =RGBA(107, 29, 94, 1)
                    Color: =RGBA(107, 29, 94, 1)
                    DisplayMode: |-
                        =Switch(
                            gblActiveUser,
                            "Procurement",
                            If(
                            !IsBlank(chartJS2.contactCreationCity)
                            And !IsBlank(chartJS2.charges),
                            DisplayMode.Edit,
                            DisplayMode.Disabled
                            ),
                            "Proponent",
                            If(
                            !IsBlank(chartJS2.witnessVendorBy)
                            And !IsBlank(chartJS2.vendorAddress)
                            And !IsBlank(chartJS2.witnessVendorDate)
                            And !IsBlank(chartJS2.witnessVendorTitle)
                            And !IsBlank(chartJS2.vendorName)
                            And !IsBlank(chartJS2.vendorContactNo)
                            And !IsBlank(chartJS2.vendorEmail),
                            DisplayMode.Edit,
                            DisplayMode.Disabled
                            ),
                            "Supplier",
                            If(
                            !IsBlank(chartJS2.toCustomerCustomerAddress)
                            And !IsBlank(chartJS2.toCustomerCustomerAttn)
                            And !IsBlank(chartJS2.bankBranchAddress)
                            And !IsBlank(chartJS2.bankIFSCNEFTCode)
                            And !IsBlank(chartJS2.bankMICRCode)
                            And !IsBlank(chartJS2.bankAccountNo)
                            And !IsBlank(chartJS2.invoicePin)
                            And !IsBlank(chartJS2.bankName)
                            And !IsBlank(chartJS2.invoiceState)
                            And !IsBlank(chartJS2.invoiceCity)
                            And !IsBlank(chartJS2.invoiceName)
                            And !IsBlank(chartJS2.contactEmail)
                            And !IsBlank(chartJS2.contactPersonName)
                            And !IsBlank(chartJS2.contactPersonName)
                            And !IsBlank(chartJS2.pinCode)
                            And !IsBlank(chartJS2.companyBillingCity)
                            And !IsBlank(chartJS2.companyBillingState)
                            And !IsBlank(chartJS2.companyBillingCountry),
                            DisplayMode.Edit,
                            DisplayMode.Disabled
                            )
                        
                        )
                    Fill: =RGBA(255, 255, 255, 1)
                    Height: =35
                    HoverFill: =RGBA(107, 29, 94, 1)
                    OnSelect: |
                        =Refresh(CM_Client_Contract);
                        Refresh(CM_ContractDetails);
                        Refresh(CM_Task);
                        Switch(
                             gblActiveUser,
                             "Supplier",
                            Set(gblTaskPatchDetail,
                            Patch(
                                CM_Task,
                                LookUp(CM_Task,Contract_Id=lclSelectedTaskHomeScreen.ID),
                                {Task_Assigned_to:"Proponent",
                                Task_Name:"Fill Out Key Data of Proponent"
                                }
                                
                            ));
                            Refresh(CM_Task);
                            UpdateIf(
                                CM_ContractDetails,
                                ID=lclSelectedTaskHomeScreen.ID,
                                {
                                    
                                    Coc_stage:3,
                                    Task_ID_Fk:{
                                        Id:gblTaskPatchDetail.ID,
                                        Value:gblTaskPatchDetail.Task_Name
                                    }
                                }
                                );
                            
                            Patch(
                                CM_Client_Contract,
                                {
                                    ID:LookUp(CM_Client_Contract,contract_ID_FK=lclSelectedTaskHomeScreen.ID).ID
                                },
                                {
                                    Notice_Client_Attention:chartJS2.toCustomerCustomerAttn,
                                    Notice_Client_Address:chartJS2.toCustomerCustomerAddress,
                                    Client_Contact_Person_name:chartJS2.contactPersonName,
                                    Client_Contact_Person_PhoneNo:Value(chartJS2.contactPhoneNo),
                                    Client_Contact_Person_Email:chartJS2.contactEmail,
                                    Client_Billing_City:chartJS2.companyBillingCity,
                                    Client_Billing_State:chartJS2.companyBillingState,
                                    Client_Billing_Country:chartJS2.companyBillingCountry,
                                    PIN_CODE:Value(chartJS2.pinCode),
                                    Client_Invoice_Name:chartJS2.invoiceName,
                                    Client_Invoice_City:chartJS2.invoiceCity,
                                    Client_Invoice_State:chartJS2.invoiceState,
                                    //Client_Invoice_Country:chartJS2.invoi,
                                    Client_Invoice_PinNo:Value(chartJS2.invoicePin),
                                    Client_Bank_Name:chartJS2.bankName,
                                    Client_Bank_MIRC_No:chartJS2.bankMICRCode,
                                    'Client_Bank IFSC Code':chartJS2.bankIFSCNEFTCode,
                                    Client_Bank_Account_No:chartJS2.bankAccountNo,
                                    Client_Bank_Branch_Address:chartJS2.bankBranchAddress
                                    
                        
                                }
                               
                            ),
                            "Proponent",
                            Set(gblTaskPatchDetail,
                            Patch(
                                CM_Task,
                                {ID:LookUp(CM_Task,Contract_Id=lclSelectedTaskHomeScreen.ID).ID},
                                {Task_Assigned_to:"Procurement",
                                Task_Name:"Legal Review"
                                
                                }
                            ));
                        
                            Refresh(CM_Task);
                            Patch(
                                CM_ContractDetails,
                                {ID:lclSelectedTaskHomeScreen.ID},
                                {Coc_stage:4,
                                Task_ID_Fk:{
                                        Id:gblTaskPatchDetail.ID,
                                        Value:gblTaskPatchDetail.Task_Name
                                    }
                                }
                                );
                            
                            Patch(
                                CM_Client_Contract,
                                {
                                    ID:LookUp(CM_Client_Contract,contract_ID_FK=lclSelectedTaskHomeScreen.ID).ID
                                },
                                { 
                                    Witness_Vendor_By:chartJS2.witnessVendorBy,
                                    Witness_Vendor_Title:chartJS2.witnessVendorTitle,
                                    'Witness Vendor Date': DateTimeValue(chartJS2.witnessVendorDate)
                                }
                        
                            );
                            Patch(CM_VENDOR,
                             {ID:LookUp(CM_VENDOR,contract_ID_FK=lclSelectedTaskHomeScreen.ID).ID},
                             {
                                    Vendor_Address:chartJS2.vendorAddress,
                                    Vendor_Contact_Number:Value(chartJS2.vendorContactNo),
                                    Title:chartJS2.vendorName,
                                    Vendor_Email:chartJS2.vendorEmail
                                
                             }
                            ),
                            "Procurement",
                            Set(gblTaskPatchDetail,
                            Patch(CM_Task,
                           
                            {
                            Contract_Id:VarContractDetailsPatch.ID,
                            Task_Name:"Fill Out Key Data Of Supplier",
                            Task_Status:"Pending",
                            Task_Assigned_to:"Supplier"
                            }
                            ));
                            Refresh(CM_Task);
                           /* Patch(
                                CM_Client_Contract,Defaults(CM_Client_Contract),
                                {
                                Client_Id:{Id:VarContractDetailsPatch.Client_ID,Value:VarContractDetailsPatch.Client_ID},
                                Contract_Id:{Id:VarContractDetailsPatch.ID,Value:VarContractDetailsPatch.ID},
                                contract_ID_FK:firstFormID,
                                Notice_Client_Address:chartJS2.toCustomerCustomerAddress,
                                Notice_Client_Attention:chartJS2.toCustomerCustomerAttn,
                                Client_Bank_Branch_Address:chartJS2.bankBranchAddress,
                                'Client_Bank IFSC Code':chartJS2.bankIFSCNEFTCode,
                                Client_Bank_MIRC_No:chartJS2.bankMICRCode,
                                Client_Bank_Account_No:chartJS2.bankAccountNo,
                                //Client_Invoice_Country:chartJS2.invoi,
                                Client_Invoice_PinNo:Value(chartJS2.invoicePin),
                                Client_Bank_Name:chartJS2.bankName,
                                Client_Invoice_State:chartJS2.invoiceState,
                                Client_Invoice_City:chartJS2.invoiceCity,
                                Client_Invoice_Name:chartJS2.invoiceName,
                                Client_Contact_Person_Email:chartJS2.contactEmail,
                                Client_Contact_Person_PhoneNo:Value(chartJS2.contactPhoneNo),
                                Client_Contact_Person_name:chartJS2.contactPersonName,
                                //PIN_CODE:Value(chartJS2.pinCode),
                                Client_Billing_State:chartJS2.companyBillingState,
                                Client_Billing_Country:chartJS2.companyBillingCountry, 
                               // Client_Delarance_Name:TextInput1_21.Text,
                                Client_Billing_City:chartJS2.companyBillingCity,
                                'Witness Vendor Date': DateTimeValue(chartJS2.witnessVendorDate),
                                Witness_Vendor_Title:chartJS2.witnessVendorTitle,
                                 Witness_Vendor_By: chartJS2.witnessVendorBy
                                //Witness_Vendor_By:TextInput1_25.Text  
                                
                               
                                }
                            );*/
                            Patch(
                                CM_ContractDetails,
                                {ID: VarContractDetailsPatch.ID },
                                {
                                
                                Contract_CreatedOn: DateTimeValue(chartJS2.contractCreationFullDate),
                                Contract_Created_Location:chartJS2.contactCreationCity,
                                Status: {Value: "Active"},
                                Coc_stage: 2,
                                Contract_Charges:Value(chartJS2.charges),
                                Task_ID_Fk:{
                                        Id:gblTaskPatchDetail.ID,
                                        Value:gblTaskPatchDetail.Task_Name
                                    }
                                //,Task_ID_Fk:LookUp(CM_Task,Contract_Id=VarContractDetailsPatch.ID)
                                }
                            );
                        
                           /* Patch(
                                CM_VENDOR,Defaults(CM_VENDOR),
                                {
                                Contract_Id:{Id:VarContractDetailsPatch.ID,Value:VarContractDetailsPatch.ID},
                               contract_ID_FK:firstFormID ,
                               Vendor_Contact_Number: Value(chartJS2.vendorContactNo),
                               Vendor_Email:chartJS2.vendorEmail,
                               Vendor_Address:chartJS2.vendorAddress,
                               Title:chartJS2.vendorName
                               
                                }
                            );*/
                        );
                        //CM_PDFSummaryFlow.Run(lclSelectedTaskHomeScreen.ID);
                        Refresh(CM_Client_Contract);
                        Refresh(CM_ContractDetails);
                        Refresh(CM_VENDOR);
                        Refresh(CM_Task);
                        If(IsBlank(firstFormID),{},CM_PDFSummaryFlow.Run(firstFormID));
                        
                        
                        
                        
                        
                        Reset(drp_ServiceType_CCS);
                        Reset(drp_Client_CCS);
                        Reset(drp_Services_CCS);
                        Reset(drp_ApplicableTo_CCS);
                        Reset(drp_Currency_CCS);
                        Reset(drp_Country_CCS);
                        Reset('drp_SelectNew&Existing_CCS');
                        Reset(lblContractName_CCS);
                        Reset(txt_DescriptionInput_CCS);
                        Reset(dte_StartDate_CCS);
                        Reset(dte_EndDate_CCS);
                        Reset(rdo_CreateDucplicateCOCSelect_CCS);
                        Navigate('Home Screen');
                    Size: =10
                    Text: ="Create"
                    Width: =Parent.Width*.07
                    ZIndex: =2

    shp_RectDocuments_PCS_2 As rectangle:
        BorderStyle: =BorderStyle.None
        DisplayMode: =DisplayMode.View
        Fill: =RGBA(107, 29, 94, 1)
        Height: =3
        Width: =con_EditAndPreviewMain_PCS_2.X-shp_CircleDocuments_PCS_2.Width-shp_CircleDocuments_PCS_2.X-Parent.Width*0.01
        X: =122
        Y: =shp_CircleDocuments_PCS_2.Y+(shp_CircleDocuments_PCS_2.Height-Self.Height)/2
        ZIndex: =10

    HeaderComponent_WithoutNavbar_PCS_2 As HeaderCMP_withoutNavbar:
        Height: =Parent.Height*.1
        Width: =Parent.Width
        ZIndex: =11

    grp_Milestone_PCS_2 As group:
        Height: =5
        Width: =5
        X: =6.109999999999999
        Y: =124.38000000000002
        ZIndex: =11

        shp_CircleDocuments_PCS_2 As circle:
            Fill: =RGBA(107, 29, 94, 1)
            Height: =70
            Width: =70
            X: =46
            Y: =506
            ZIndex: =2

        shp_CircleOverview_PCS_2 As circle:
            BorderStyle: =BorderStyle.None
            Fill: =RGBA(107, 29, 94, 1)
            Height: =70
            Width: =70
            X: =46
            Y: =126
            ZIndex: =3

        ico_Overview_PCS_2 As icon.Flag:
            Color: =RGBA(255, 255, 255, 1)
            DisplayMode: =DisplayMode.View
            Height: =36
            Icon: =Icon.Flag
            Width: =35
            X: =63
            Y: =143
            ZIndex: =4

        shp_RectOverview_PCS_2 As rectangle:
            BorderStyle: =BorderStyle.None
            DisplayMode: =DisplayMode.View
            Fill: =RGBA(107, 29, 94, 1)
            Height: =3
            Width: =con_EditAndPreviewMain_PCS_2.X-shp_CircleDocuments_PCS_2.Width-shp_CircleDocuments_PCS_2.X-Parent.Width*0.01
            X: =122
            Y: =159
            ZIndex: =5

        ico_Document_PCS_2 As icon.Flag:
            Color: =RGBA(255, 255, 255, 1)
            DisplayMode: =DisplayMode.View
            Height: =36
            Icon: =Icon.Flag
            Width: =35
            X: =63
            Y: =524
            ZIndex: =6

        shp_RectMileStone_PCS_2 As rectangle:
            Fill: =RGBA(107, 29, 94, 1)
            Height: =261
            Width: =3
            X: =79
            Y: =237
            ZIndex: =7

        lbl_Overview_PCS_2 As label:
            Align: =Align.Center
            FontWeight: =FontWeight.Bold
            Height: =41
            Text: ="Overview"
            Width: =149
            X: =7
            Y: =196
            ZIndex: =8

        lbl_Document_PCS_2 As label:
            Align: =Align.Center
            FontWeight: =FontWeight.Bold
            Height: =41
            Text: ="Documents"
            Width: =149
            X: =7
            Y: =571
            ZIndex: =9

